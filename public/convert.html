<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>生成 dingyue.json</title>
</head>
<body>
<h3>生成 dingyue.json</h3>
<button id="convert">生成 JSON 并下载</button>

<script>
document.getElementById('convert').onclick = async function() {
    try {
        const res = await fetch('public/data.json'); // 从 data.json 拉取
        const data = await res.json();

        // 这里可以处理 data，如果你要转换格式可以在此修改
        const dingyueData = data.map(item => ({
            name: item.name,
            api: item.api,
            adult: !!item.adult
        }));

        const blob = new Blob([JSON.stringify(dingyueData, null, 2)], {type: 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'dingyue.json';
        a.click();
        URL.revokeObjectURL(a.href);
        alert('生成完成，已下载 dingyue.json');
    } catch(e) {
        alert('转换失败: ' + e);
        console.error(e);
    }
};
</script>
</body>
</html>
