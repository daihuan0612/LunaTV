<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>影视仓中转</title>
</head>
<body>
<script>
  // 使用 fetch 获取 data.json 数据
  fetch('data.json')
    .then(res => res.json()) // 解析为 JSON
    .then(data => {
      // 转换数据格式
      const transformed = Object.keys(data.api_site).map(key => {
        const site = data.api_site[key];
        return {
          name: site.name,
          api: site.api,
          adult: site.is_adult
        };
      });

      // 将转换后的数据作为 JSON 输出
      const jsonData = JSON.stringify(transformed);

      // 将 JSON 设置为页面内容，影视仓访问该页面时直接得到数据
      document.body.innerText = jsonData;
    })
    .catch(err => {
      // 如果读取或转换失败，输出错误信息
      console.error('数据加载失败:', err);
      document.body.innerText = '数据加载失败，请检查系统配置。';
    });
</script>
</body>
</html>
